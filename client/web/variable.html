<!DOCTYPE html>
<link rel="import" href="annotations.html">

<element name="dartdoc-variable" constructor="VariableElement" extends="div"
    apply-author-styles>
  <template>
    
    <a id="{{item.name}}"></a>
    
    <dartdoc-annotation annotations="{{item.annotations}}">
    </dartdoc-annotation>
    
    <p>
      <template if="item.isFinal">final</template>
      <template if="item.isStatic">static</template>
      <template if="item.isAbstract">static</template>
      <template if="item.isConstant">const</template>
      <template if="item.isSetter">
        void&nbsp;set&nbsp;{{name}}(
        <dartdoc-annotation annotations="{{setterParameter.annotations}}">
        </dartdoc-annotation>
        <span class="setParam">
          {{createType(setterParameter.type, 'dartdoc-variable', 'setParam')}}
        </span>
        {{setterParameter.decoratedName}})
      </template>
      <template if="!item.isSetter">
        <span class="type">
          {{createType(item.type, 'dartdoc-variable', 'type')}}
        </span>
        {{getter}}&nbsp;{{name}}
      </template>
    </p>
    
    <template if="isInherited">
      This property is inherited from 
      <a on-click="app.viewer.handleLink(inheritedFrom.location)">
        {{inheritedFrom.simpleType}}
      </a>
    </template>
    
    <p class="description">
      {{addComment('dartdoc-variable')}}
    </p>
  </template>
  <script type="application/dart">
    import 'dart:html';
    import 'package:web_ui/web_ui.dart';
    import 'package:dartdoc_viewer/item.dart';
    import 'app.dart' as app;
    import 'member.dart';

    /**
     * An HTML representation of a Variable.
     */
    class VariableElement extends MemberElement {

      String get getter => item.isGetter ? 'get' : '';

      Parameter get setterParameter => item.setterParameter;

      NestedType get type => item.type;

      String get name => item.name;
      
      bool get isInherited => item.inheritedFrom != '';
      
      LinkableType get inheritedFrom {
        if (isInherited) {
          var qualifiedName = item.inheritedFrom;
          var index = qualifiedName.lastIndexOf('.');
          var superName = qualifiedName.substring(0, index);
          return new LinkableType(superName);
        }
      }
    }
  </script>
</element>
