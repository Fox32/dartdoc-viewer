<!DOCTYPE html>
<link rel="import" href="item.html">
<link rel="import" href="class.html">
<link rel="import" href="category.html">

<element name="dartdoc-library" constructor="LibraryElement" extends="article"
    apply-author-styles>
  <template>
    <template if="item == null">
      Loading...
    </template>
    <template if="item != null">
      <h1>{{item.name}} library</h1>
    
      <!-- Comment -->
      <section class="description">{{addComment('dartdoc-library')}}</section>

      <template if="variables.content.isNotEmpty">
        <dartdoc-category category="{{variables}}"></dartdoc-category>
      </template>
      <template if="operators.content.isNotEmpty">
        <dartdoc-category category="{{operators}}"></dartdoc-category>
      </template>
      <template if="functions.content.isNotEmpty">
        <dartdoc-category category="{{functions}}"></dartdoc-category>
      </template>
      <template if="abstractClasses.content.isNotEmpty">
        <dartdoc-category category="{{abstractClasses}}"></dartdoc-category>
      </template>
      <template if="clazzes.content.isNotEmpty">
        <dartdoc-category category="{{clazzes}}"></dartdoc-category>
      </template>
      <template if="typedefs.content.isNotEmpty">
        <dartdoc-category category="{{typedefs}}"></dartdoc-category>
      </template>
      <template if="errors.content.isNotEmpty">
        <dartdoc-category category="{{errors}}"></dartdoc-category>
      </template>
    </template>  
  </template>
  
  <script type="application/dart">
    import 'dart:async';
    
    import 'package:dartdoc_viewer/item.dart';
    import 'package:web_ui/web_ui.dart';
    
    import 'app.dart';
    import 'member.dart';
    
    class LibraryElement extends MemberElement {
      inserted() {
        _showLibrary();
      }
      
      /// Route handler for libraries.
      void _showLibrary() {
        if (item is Placeholder) {
          viewer.homePage.loadLibrary(item).then((response) {
            viewer.currentPage = response;
            item = response;
          });
        } else {
          viewer.currentPage = item;
        }
      }
      
      Category get variables => item.variables;

      Category get operators => item.operators;

      Category get functions => item.functions;

      Category get abstractClasses => item.abstractClasses;

      Category get clazzes => item.classes;
      
      Category get typedefs => item.typedefs;

      Category get errors => item.errors;
    }
  </script>
</element>