<!DOCTYPE html>
<link rel="import" href="item.html">
<link rel="import" href="category.html">
<link rel="import" href="parameters.html">
<link rel="import" href="annotations.html">

<!-- TODO(tmandel): Reduce redundancy here and in method.html -->
<polymer-element name="method-panel" attributes="item" extends="div">
  <template>
    <template if="{{item == null}}">
      Loading Method Panel...
    </template>
    <template if="{{item != null}}">
      <a id="{{idName}}">
      </a>
      <div class="panel-heading">

        <dartdoc-annotation annotations="{{annotations}}">
        </dartdoc-annotation>

        <!-- Return Type -->
        <p>
          <span>
            {{modifiers}}
            <template if="{{!item.isConstructor}}">
              <span class="type">
              </span>
              {{createType(item.type, 'method-panel', 'type')}}
            </template>
            <template if="{{item.isOperator}}">operator</template>
            <b>{{item.decoratedName}}</b>
             <!-- Parameters -->
            <small is="dartdoc-parameter" parameters="{{parameters}}"></small>
          </span>
        </p>
      </div>

      <p class="text-right"><dfn>
        <template if="{{isInherited}}">
          This member is inherited from
          <template if="{{exists(inheritedFrom.location)}}">
            <a href="#{{inheritedFrom.location}}">
              {{inheritedFrom.simpleType}}
            </a>
          </template>
          <template if="{{!exists(inheritedFrom.location)}}">
            <i>{{inheritedFrom.simpleType}}</i>
          </template>
        </template>
      </dfn></p>

        <section class="description">
        </section>
      <!-- Comment -->
      <template if="{{viewer.isInherited || !hasInheritedComment}}">
        {{addComment('method-panel', !isExpanded)}}
      </template>

      <template if="{{!nothingToExpand}}">
        <a on-click="toggleExpand" class="btn-link">
          <template if="{{isExpanded}}">
            ...Show less
          </template>
          <template if="{{!isExpanded}}">
            ...Show more
          </template>
        </a>
      </template>

      <p class="text-right"><dfn>
        <template if="{{hasInheritedComment && isExpanded}}">
          <template if="{{viewer.isInherited}}">
            This documentation is inherited from
            <template if="{{exists(commentFrom.location)}}">
              <a href="#{{commentFrom.location}}">
                {{commentFrom.simpleType}}
              </a>
            </template>
            <template if="{{!exists(commentFrom.location)}}">
              <i>{{commentFrom.simpleType}}</i>
            </template>
          </template>
        </template>
      </dfn></p>

    </template>
  </template>

  <script type="application/dart" src="method-panel.dart">

  </script>

</polymer-element>