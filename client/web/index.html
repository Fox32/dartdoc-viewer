<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" href="static/css/bootstrap.css">
<link rel="stylesheet" href="static/css/pics.css">
<link rel="import" href="category.html">
<link rel="import" href="item.html">
<link rel="import" href="page.html">
<link rel="import" href="search.html">

<script type="application/dart" src="app.dart"></script>
<script src="packages/browser/dart.js"></script>
<script type="text/javascript" src="static/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="static/js/bootstrap.min.js"></script>

<template if="viewer.currentPage != null">
  <template if="viewer.currentPage == viewer.homePage">
    <title>Dart API Reference</title>
  </template>
  <template if="viewer.currentPage != viewer.homePage">
    <title>{{viewer.currentPage.decoratedName}} - Dart API Reference</title>
  </template>
</template>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<a id='dartdoc-top'></a>

<div class="navbar">
  <div class="container">
    <!-- .navbar-toggle is used as the toggle for collapsed navbar content -->
    <button type="button" class="navbar-toggle" data-toggle="collapse" 
      data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>

    
    <a href="http://www.dartlang.org/" class="navbar-brand header-logo"></a>
    <a on-click="viewer.changePage(viewer.homePage)" 
      class="navbar-brand">
      Dart API Reference
    </a>

    <div class="nav-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav">
        <template if="viewer.currentPage != null">
          <template iterate="item in viewer.breadcrumbs">
            <template if="item != viewer.breadcrumbs.first">
              <template if="item != viewer.breadcrumbs.last">
                <li>
                  <template instantiate="if item != null">
                    <a on-click="viewer.changePage(item)">
                      {{item.decoratedName}}
                    </a>
                  </template>
                </li>
              </template>
              <template if="item == viewer.breadcrumbs.last">
                <li class="active">
                  <template instantiate="if item != null">
                    <a>{{item.decoratedName}}</a>
                  </template>
                </li>
              </template>
            </template>
          </template>
        </template>
      </ul>  
      <search-box></search-box>
    </div>
  </div>
</div>

<div class="container">
  <template instantiate="if viewer.homePage != null">
    <template if="viewer.currentPage != viewer.homePage">
      <div class="list-group visible-lg col-lg-3" 
        data-spy="affix" data-offset-top="200">
        <template iterate="library in viewer.homePage.libraries">
          <template 
            if="library.decoratedName == viewer.breadcrumbs[1].decoratedName">
            <a on-click="viewer.changePage(library)" 
              class="list-group-item active">
              {{library.decoratedName}}
            </a>
          </template>
          <template 
            if="library.decoratedName != viewer.breadcrumbs[1].decoratedName">
            <a on-click="viewer.changePage(library)" class="list-group-item">
              {{library.decoratedName}}
            </a>
          </template>
        </template>
      </div>
      <main class="col-12 col-lg-6">
        <dartdoc-page home="{{viewer.homePage}}"></dartdoc-page>
      </main>

      <!-- Minimap -->
      <div class="visible-lg col-lg-3 well well-sm nav" id="minimap">
        <ul>
          <template instantiate="if viewer.currentPage is Library">
            <li class="active"><a href="#dartdoc-top">
              {{viewer.currentPage.name}} Library
            </a></li>
            <template 
              instantiate="if viewer.currentPage.operators.content.isNotEmpty">
              <li><a href="#operators">Operators</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.operators.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.variables.content.isNotEmpty">
              <li><a href="#properties">Properties</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.variables.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.functions.content.isNotEmpty">
              <li><a href="#functions">Functions</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.functions.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.classes.content.isNotEmpty">
              <li><a href="#classes">Classes</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.classes.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.typedefs.content.isNotEmpty">
              <li><a href="#typedefs">Typedefs</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.typedefs.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.errors.content.isNotEmpty">
              <li><a href="#exceptions">Exceptions</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.errors.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
          </template>
          <template 
            instantiate="if viewer.currentPage is Class">
            <li class="active"><a href="#dartdoc-top">
              {{viewer.currentPage.name}} Class
            </a></li>
            <template 
              instantiate="if viewer.currentPage.operators.content.isNotEmpty">
              <li><a href="#operators">Operators</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.operators.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.variables.content.isNotEmpty">
              <li><a href="#properties">Properties</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.variables.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.constructs.content.isNotEmpty">
              <li><a href="#constructors">Constructors</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.constructs.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
            <template 
              instantiate="if viewer.currentPage.functions.content.isNotEmpty">
              <li><a href="#functions">Functions</a></li>
              <ul>
                <template 
                  iterate="item in viewer.currentPage.functions.content">
                  <li><a href="#{{item.name}}">{{item.name}}</a></li>
                </template>
              </ul>
            </template>
          </template>
        </ul>
      </div>
    </template>
    <template if="viewer.currentPage == viewer.homePage">
      <main class="col-12">
        <dartdoc-page home="{{viewer.homePage}}"></dartdoc-page>
      </main>
    </template>
  </template>
</div>