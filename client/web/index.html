<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" href="static/css/bootstrap.css">
<link rel="stylesheet" href="static/css/pics.css">
<link rel="import" href="category.html">
<link rel="import" href="item.html">
<link rel="import" href="page.html">
<link rel="import" href="search.html">

<script type="application/dart" src="app.dart"></script>
<script src="packages/browser/dart.js"></script>
<script type="text/javascript" src="static/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="static/js/bootstrap.min.js"></script>

<template if="viewer.currentPage != null">
  <template if="viewer.currentPage == viewer.homePage">
    <title>Dart API Reference</title>
  </template>
  <template if="viewer.currentPage != viewer.homePage">
    <title>{{viewer.currentPage.decoratedName}} - Dart API Reference</title>
  </template>
</template>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <!-- .navbar-toggle is used as the toggle for collapsed navbar content -->
    <button type="button" class="navbar-toggle" data-toggle="collapse" 
      data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>

    
    <a href="http://www.dartlang.org/" class="navbar-brand header-logo"></a>
    <a on-click="viewer.changePage(viewer.homePage)" 
      class="navbar-brand">
      Dart API Reference
    </a>

    <div class="nav-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav">
        <template if="viewer.currentPage != null">
          <template iterate="item in viewer.breadcrumbs">
            <template if="item != viewer.breadcrumbs.first">
              <template if="item != viewer.breadcrumbs.last">
                <li>
                  <template instantiate="if item != null">
                    <a on-click="viewer.changePage(item)">
                      {{item.decoratedName}}
                    </a>
                  </template>
                </li>
              </template>
              <template if="item == viewer.breadcrumbs.last">
                <li class="active">
                  <template instantiate="if item != null">
                    <a>{{item.decoratedName}}</a>
                  </template>
                </li>
              </template>
            </template>
          </template>
        </template>
        
      </ul>  

      <ul class="nav navbar-nav pull-right">
        
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown">
            Options <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <template instantiate="if viewer.currentPage != viewer.homePage">
              <li class="visible-lg"><a on-click="viewer.togglePanel()">
                <template if="viewer.isPanel">Hide Libraries</template>
                <template if="!viewer.isPanel">Show Libraries</template>
              </a></li>
            </template>
            <li><a href="#">Hide Inherited</a></li>
          </ul>
        </li>

        <li><search-box></search-box></li>
      </ul>
    </div>
  </div>
</div>

<div class="container main-body">

  <template instantiate="if viewer.homePage != null">
    <template if="viewer.currentPage != viewer.homePage && viewer.isPanel">
      <div class="list-group visible-lg col-lg-3" 
        data-spy="affix" data-offset-top="200">
        <template iterate="library in viewer.homePage.libraries">
          <template 
            if="library.decoratedName == viewer.breadcrumbs[1].decoratedName">
            <a on-click="viewer.changePage(library)" 
              class="list-group-item active">
              {{library.decoratedName}}
            </a>
          </template>
          <template 
            if="library.decoratedName != viewer.breadcrumbs[1].decoratedName">
            <a on-click="viewer.changePage(library)" class="list-group-item">
              {{library.decoratedName}}
            </a>
          </template>
        </template>
      </div>
      <main class="col-12 col-lg-8">
        <dartdoc-page home="{{viewer.homePage}}"></dartdoc-page>
      </main>
    </template>
    <template if="viewer.currentPage == viewer.homePage || !viewer.isPanel">
      <main class="col-12">
        <dartdoc-page home="{{viewer.homePage}}"></dartdoc-page>
      </main>
    </template>
  </template>
</div>